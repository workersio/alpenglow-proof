<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.SetLike</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.SetLike";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">SetLike</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/6b1d0f08cb89b784bfb1bb9cabf8016cc8059f07/Mathlib/Tactic/SetLike.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Aesop.html">Aesop</a></li><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Mathlib/Tactic/Basic.html">Mathlib.Tactic.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.SetLike" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.LibraryNote.«SetLike Aesop ruleset»"><span class="name">Mathlib</span>.<span class="name">LibraryNote</span>.<span class="name">«SetLike Aesop ruleset»</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="SetLike-Rule-Set">SetLike Rule Set <a class="hover-link" href="#SetLike-Rule-Set">#</a></h1><p>This module defines the <code>SetLike</code> and <code>SetLike!</code> Aesop rule sets.
Aesop rule sets only become visible once the file in which they're declared is imported,
so we must put this declaration into its own file.</p></div><div class="decl" id="Mathlib.LibraryNote.«SetLike Aesop ruleset»"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/6b1d0f08cb89b784bfb1bb9cabf8016cc8059f07/Mathlib/Tactic/SetLike.lean#L21-L53">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/SetLike.html#Mathlib.LibraryNote.«SetLike Aesop ruleset»"><span class="name">Mathlib</span>.<span class="name">LibraryNote</span>.<span class="name">«SetLike Aesop ruleset»</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Tactic/Basic.html#LibraryNote">LibraryNote</a></div></div><p>The Aesop tactic (<code>aesop</code>) can automatically prove obvious facts about membership in structures
such as subgroups and subrings. Certain lemmas regarding membership in algebraic substructures
are given the <code>aesop</code> attribute according to the following principles:</p><ul>
<li>Rules are in the <code>SetLike</code> ruleset: (rule_sets := [SetLike]).</li>
<li>Apply-style rules with trivial hypotheses are registered both as <code>simp</code> rules and as
<code>safe</code> Aesop rules. The latter is needed in case there are metavariables in the goal.
For instance, Aesop can use the rule <code>one_mem</code> to prove
<code>(M : Type*) [Monoid M] (s : Submonoid M) ⊢ ∃ m : M, m ∈ s</code>.</li>
<li>Apply-style rules with nontrivial hypotheses are marked <code>unsafe</code>. This is because applying them
might not be provability-preserving in the context of more complex membership rules.
For instance, <code>mul_mem</code> is marked <code>unsafe</code>.<ul>
<li>Unsafe rules are given a probability no higher than 90%. This is the same probability
Aesop gives to safe rules when they generate metavariables. If the priority is too high, loops
generated in the presence of metavariables will time out Aesop.</li>
<li>Rules that cause loops (even in the absence of metavariables) are given a low priority of 5%.
These rules are placed in the <code>SetLike!</code> ruleset instead of the <code>SetLike</code> ruleset so that
they are not invoked by default. An example is <code>SetLike.mem_of_subset</code>.</li>
<li>Simplifying the left-hand side of a membership goal is prioritised over simplifying the
right-hand side. By default, rules simplifying the LHS (e.g., <code>mul_mem</code>) are given
probability 90% and rules simplifying the RHS are given probability 80%
(e.g., <code>Subgroup.mem_closure_of_mem</code>).</li>
<li>These default probabilities are for rules with simple hypotheses that fail quickly when
not satisfied, such as <code>mul_mem</code>. Rules with more complicated hypotheses, or rules that are
less likely to progress the proof state towards a solution, are given a lower priority.</li>
</ul>
</li>
<li>To optimise performance and avoid timeouts, Aesop should not be invoking low-priority rules
unless it can make no other progress. If common usage patterns cause Aesop to invoke such rules,
additional lemmas are added at a higher priority to cover that pattern.
For example, <code>Subgroup.mem_closure_of_mem</code> covers a common use case of <code>SetLike.mem_of_subset</code>.</li>
</ul><p>Some examples of membership-related goals which Aesop with this ruleset is designed to close
can be found in the file MathlibTest/set_like.lean.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Tactic/SetLike.html#Mathlib.LibraryNote.«SetLike Aesop ruleset»">Mathlib.LibraryNote.«SetLike Aesop ruleset»</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Unit.unit">(</a><a href="../.././Init/Prelude.html#Unit.unit">)</a></li></ul></details><details id="instances-for-list-Mathlib.LibraryNote.«SetLike Aesop ruleset»" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>