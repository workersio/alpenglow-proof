\* TLC Model Checking Configuration
SPECIFICATION Spec

\* Model values
CONSTANTS
    v1 = v1
    v2 = v2
    v3 = v3
    b0 = b0
    b1 = b1
    b2 = b2
    b3 = b3
    b4 = b4
    b5 = b5
    nullBlock = nullBlock

\* Assign values to constants (REDUCED for tractable checking)
CONSTANTS
    NumValidators = 3
    ByzantineCount = 0
    GST = 2
    MaxSlot = 2      \* Reduced from 3
    MaxBlocks = 3    \* Reduced from 5
    DeltaTimeout = 1 \* Reduced from 2
    DeltaBlock = 1
    WindowSize = 2
    
    Validators = {v1, v2, v3}
    Slots = {0, 1, 2}  \* Reduced to match MaxSlot
    BlockHashes = {b0, b1, b2, b3}
    NoBlock = nullBlock
    GenesisHash = b0
    
    \* Use the function defined in MC.tla
    StakeMap <- MC_StakeMap

\* Invariants - ALL critical safety properties
INVARIANTS
    TypeInvariant
    SafetyInvariant        \* THEOREM 1: No conflicting finalization
    VoteUniqueness         \* LEMMA 20: At most one initial vote per slot
    UniqueNotarization     \* LEMMA 24: At most one block notarized per slot
    FinalizedImpliesNotarized  \* LEMMA 25: Finalized blocks were notarized
    NoConflictingCerts     \* No conflicting certificates in same slot
    ByzantineStakeOK       \* Byzantine stake < 20%

\* State constraint
CONSTRAINT StateConstraint